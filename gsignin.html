<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="styles/styles.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway" />
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id"
        content="797121040974-om85ht6lbbjqa3qqtif2f4b8p00i1g4m.apps.googleusercontent.com">
    <title>G-signin</title>
</head>

<body class="ohi-body">
    <div id="indexSidenav" class="sidenav">
        <a href="about.html" class="about">About</a>
        <a href="#" class="blog">Blog</a>
        <a href="gsignin.html" class="Gsignin">Projects</a>
        <a href="#" class="contact">Contact</a>
    </div>
    <div class="container" id="ohiBox">
        <div class="text-content" id="gsigninWelcome">
            <div>
                <p id=displayUsername>Not logged in</p>
            </div>
            <div class="gsignin-container">
                <div>
                    <div class="g-signin2" data-onsuccess="onSuccess"></div>
                    <script>
                        var signedIn = false;
                        document.getElementsByClassName("g-signin2").style.display = signedIn ? "none" : "block";
                        function onSuccess(googleUser) {
                            var profile = googleUser.getBasicProfile();
                            signedIn = true;
                            console.log('Logged in as: ' + profile.getName());
                            console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
                            console.log('Image URL: ' + profile.getImageUrl());
                            console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
                            document.getElementById("displayUsername").innerHTML = "Hello " + profile.getName();
                            document.getElementById("signoutLink").style.display = "block";
                            document.getElementsByClassName("g-signin2").style.display = "none;"
                        }
                    </script>
                </div>
            </div>
            <div>
                <a class="random-link" id="signoutLink" href="#" onclick="signOut();">Sign out</a>
                <script>
                    document.getElementById("signoutLink").style.display = signedIn ? "block" : "none";
                    function signOut() {
                        var auth2 = gapi.auth2.getAuthInstance();
                        auth2.signOut().then(function () {
                            document.getElementById("displayUsername").innerHTML = "Not logged in";
                            console.log('User signed out.');
                        });
                        signedIn = false;
                        document.getElementById("signoutLink").style.display = "none";
                        document.getElementsByClassName("g-signin2").style.display = "block;"

                    }
                </script>
            </div>
        </div>
    </div>

    <div class="homeButton">
        <p>
            <a class="random-link" href="index.html"><img class="potato-icon" id="homeboundPotato"
                    src="images/potato-icon.png" alt="PotatoDear">
            </a>
        </p>
    </div>

</body>

</html>